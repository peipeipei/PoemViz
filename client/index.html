
<head>
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.4.8/d3.min.js"></script>
    <!-- <script src="index.js"> </script> -->
    
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
    <script src="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
    <!-- <link rel="stylesheet" type="text/css" href="index.css">  -->
    <link rel="stylesheet" href="//code.jquery.com/ui/1.11.0/themes/smoothness/jquery-ui.css">
    <script src="//code.jquery.com/ui/1.11.0/jquery-ui.js"></script>
    
    
</head>

<!--
<body>
</body>
-->

<template name = 'redirect'>
    {{# if isReady}}
        {{redirect}}
    {{/if}}
</template>

<template name="poem">
{{# if isReady}}

    

    <div class='container'>
            
            <div class='col-md-8 left bigCol' id='leftSide'>
                 <div id = 'shoutkey'><br></div>
                 <span><button type="button" class="btn btn-default newShoutKey" data-active=false>Get New ShoutKey</button></span><br>
                <div class = 'poemIdentifiers' id = 'poemTitle'><br>{{poemTitle}}</div>
                <div class = 'poemIdentifiers' id = 'poemAuthor'>By {{poemAuthor}}</div>
                <div id = 'syllableCount'>Syllable Count</div>
                

                <div id = 'poemWrapper'>
               {{# each lines}}
                    <span class={{this.class}} id={{this.line_id}}>    
                    {{# each this.content}}
                        <span id={{this.word_id}} class = {{this.class}}><span class = "space">&nbsp;</span><span class='syllable'>{{# each this.content}}<span id={{this.letter_id}}  class={{this.class}}>{{this.content}}</span>{{/each}}</span></span>{{/each}}
                    <span class='lineCount'></span>
                    </span>
                    <br>
                {{/each}}
                </div>
            
            </div>
            <div class='col-md-4 right bigCol' id='layers'> 
            {{# each layer}}
                {{# if equals type 'typing'}}
                    <div class="layer" data-name="typing" id={{this.id}}>
                        <div class="layerName" contenteditable=true onfocus="this.value = this.value;">{{this.name}}</div>
                        <div class="btn-group" id="toggle">
                           <span><button type="button" class="btn btn-default wordOption" data-active=false>Turn Text Off</button></span><br>
                       
                        Line Breaks by: <select class='optionSelect'>
                            <option value='origOption'>Original</option>
                            <option value='puncOption'>All Punctuation</option>
                            <option value='sentOption'>Sentence Punctuation</option>
                        </select>
                        </div>
                    </div>
                {{/if}}
                {{# if equals type 'stressing'}}
                    <div class="layer" data-name="stressing" id={{this.id}}>
                    <div class="layerName" contenteditable=true>{{this.name}}</div>
                    <div class='info'> <i>Click to show stress.</i></div>
                    <span class='visibilitySpan'>Visibility: <input type="checkbox" data-layer='stressing' class='visibility' checked></span> 
                    <div class="btn-group" id="toggle">
                            <span><button type="button" class="btn btn-default stressClear">Clear All Stress Marks</button></span>
                        </div>
                    </div>
                {{/if}}
                {{# if equals type 'rhyme'}}
                    <div class='layer' data-name='rhyme' id={{this.id}}>
                        <div class="layerName" contenteditable=true>{{this.name}}</div>
                        Highlight:
                        <select class='rhymeSelect'>
                            <option value='line'>Line</option>
                            <option value='word'>Word</option>
                            <option value='letter'>Letter</option>
                        </select>
                        <div class='highlighting'>
                            <div class='highlightColors'>
                                <div class="colorBlock">
                                    <span class='colorSquare' data-color='rgba(255,153,153,1)' style='background-color:rgba(255,153,153,1)'></span> 
                                    <span class="colorName" contenteditable=true>Editable Color Label</span>
                                </div>
                                <div class="colorBlock">
                                    <span class='colorSquare' data-color='rgba(255,153,255,1)' style='background-color:rgba(255,153,255,1)'></span> 

                                    <span class="colorName" contenteditable=true>Editable Color Label</span>

                                    <!--New Color Plan-->
<!--
                            {{#each colorOptions}}
                                <span class = 'colorSquare'  style = 'background-color: {{this.color}}'></span>
                                <span class = 'colorName' contenteditable=true>Color Label</span>
                            {{/each}}
-->

                                </div>
                            </div>
                            <br>
                            <button class='addColor'>
                                +
                            </button>
                        </div>
                         <span class="opacities">
                            <form action="">
                                Opacity:
                                <input type="radio" class="opacity" name={{this.id}} id="opacity100" data-value=1>100%
                                <input type="radio" class="opacity" name={{this.id}} id="opacity60" data-value=.6>60%
                                <input type="radio" class="opacity" name={{this.id}} id="opacity20" data-value=.2>20%
                                <input type="radio" class="opacity" name={{this.id}} id="opacity20" data-value=0>0%
                            </form>    
                        </span>    
                    </div>
                {{/if}}
                    {{# if equals type 'syllable'}}
                    <div class='layer' data-name='syllable' id={{this.id}}>
                        <div class="layerName" contenteditable=true>{{this.name}}</div>
                        <div class='info'> <i>Click to show syllable breaks.</i><br>Please click WITHIN words, the breaks between words have already been counted.</div>
                        <span class='visibilitySpan'>Visibility: <input type="checkbox" data-layer='syllable' class='visibility' checked></span>
                        <div class="btn-group" id="toggle">
                            <span><button type="button" class="btn btn-default syllablesClear">Clear All Syllable Marks</button></span>
                            <span><button type="button" class="btn btn-default syllablesGrid" data-gridded=false>Grid</button></span>
                            

                        </div>
                    </div>
                {{/if}}
                {{# if equals type 'bold'}}
                    <div class='layer' data-name='bold' id={{this.id}}>
                        <div class="layerName" contenteditable=true>{{this.name}}</div>
                        Bold:
                        <select class='boldSelect'>
                            <option value='boldLine'>Line</option>
                            <option value='boldWord'>Word</option>
                            <option value='boldLetter'>Letter</option>
                        </select>
                        <div class='bolding'>
                            <span class='boldColors'>
                                <div class='colorSquare' data-color='#000' style='background-color:#000'></div>
                                <div class='colorSquare' data-color='#063' style='background-color:#063'></div>
                            </span>
                            <button class='addBoldColor'>
                                +
                            </button>
                        </div>
                        
                    </div>
                {{/if}}
            {{/each}}
            
                
                <div class="dropdown btn-group">
                    <a class="btn dropdown-toggle layers-menu" data-toggle="dropdown" href="#">
                        Add Layer
                        <span class="caret"></span>
                    </a>
                    <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                        <li><a class = "newColorLayer" href="#">Words</a></li>
                        <li><a class = "newBoldLayer" href="#">Other Bolding</a></li>
                        <li><a class = "newColorLayer" href="#">Other Coloring</a></li>
                    </ul>
                </div>
            </div>
        
        <div class='col-md-8 left bigCol' id='puncSide'>
            <div id = 'syllableCount'>Syllable Count</div>
                {{# each lines1}}
                <span class={{this.class}} id={{this.line_id}}>    
                {{# each this.content}}
                    <span id={{this.word_id}} class = {{this.class}}>
    <span class='syllable'>{{# each this.content}}<span id={{this.letter_id}}  class={{this.class}}>{{this.content}}</span>{{/each}}</span>
                        <span class = "space">&nbsp;</span>
                    </span>
                {{/each}}
                <span class='lineCount'></span>
                </span>
                <br>
            {{/each}}
            </div>
        
        <div class='col-md-8 left bigCol' id='sentSide'>
            <div id = 'syllableCount'>Syllable Count</div>
                {{# each lines2}}
                <span class={{this.class}} id={{this.line_id}}>    
                {{# each this.content}}
                    <span id={{this.word_id}} class = {{this.class}}>
    <span class='syllable'>{{# each this.content}}<span id={{this.letter_id}}  class={{this.class}}>{{this.content}}</span>{{/each}}</span>
                        <span class = "space">&nbsp;</span>
                    </span>
                {{/each}}
                <span class='lineCount'></span>
                </span>
                <br>
            {{/each}}
            </div>
        
    </div>
    {{/if}}
</template>